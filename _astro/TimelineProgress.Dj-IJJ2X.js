import{j as E}from"./jsx-runtime.BMN_4_xO.js";import{r as V}from"./index.CMQ3OGCn.js";import{g as ne,d as re,e as ae,f as se}from"./date.DRKj0Afh.js";import{c as oe,m as ie,a as ue,i as le,r as ce,b as fe,d as me,e as Z,f as pe,g as de,h as ge,s as ye,p as he,V as Se,j as ve,k as Ee,S as xe,H as Ae,v as K,l as De,n as Ve,o as Oe,G as Te}from"./SVGVisualElement.CBU4GYSh.js";function be(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(oe(r),ie);return{type:"keyframes",ease:o=>r.next(a*o).value/t,duration:ue(a)}}const je=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e};function $(e,t){return le(e)?e[je(0,e.length,t)]:e}function B(e){return typeof e=="object"&&!Array.isArray(e)}function q(e,t,n,r){return typeof e=="string"&&B(t)?ce(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function Ie(e,t,n){return e*(t+1)}function J(e,t,n,r){var a;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:(a=r.get(t))!==null&&a!==void 0?a:e}function Me(e,t,n){for(let r=0;r<e.length;r++){const a=e[r];a.at>t&&a.at<n&&(me(e,a),r--)}}function we(e,t,n,r,a,o){Me(e,a,o);for(let s=0;s<t.length;s++)e.push({value:t[s],at:fe(a,o,r[s]),easing:$(n,s)})}function Fe(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function Ge(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Ne="easeInOut";function Ye(e,{defaultTransition:t={},...n}={},r,a){const o=t.duration||.3,s=new Map,c=new Map,y={},i=new Map;let x=0,u=0,G=0;for(let T=0;T<e.length;T++){const d=e[T];if(typeof d=="string"){i.set(d,u);continue}else if(!Array.isArray(d)){i.set(d.name,J(u,d.at,x,i));continue}let[O,g,f={}]=d;f.at!==void 0&&(u=J(u,f.at,x,i));let m=0;const b=(h,S,A,j=0,I=0)=>{const l=Ce(h),{delay:P=0,times:v=pe(l),type:L="keyframes",repeat:N,repeatType:Qe,repeatDelay:Xe=0,...te}=S;let{ease:D=t.ease||"easeOut",duration:p}=S;const k=typeof P=="function"?P(j,I):P,z=l.length,H=ge(L)?L:a?.[L];if(z<=2&&H){let M=100;if(z===2&&Le(l)){const w=l[1]-l[0];M=Math.abs(w)}const Y={...te};p!==void 0&&(Y.duration=ye(p));const C=be(Y,M,H);D=C.ease,p=C.duration}p??(p=o);const U=u+k;v.length===1&&v[0]===0&&(v[1]=1);const W=v.length-l.length;if(W>0&&de(v,W),l.length===1&&l.unshift(null),N){p=Ie(p,N);const M=[...l],Y=[...v];D=Array.isArray(D)?[...D]:[D];const C=[...D];for(let w=0;w<N;w++){l.push(...M);for(let F=0;F<M.length;F++)v.push(Y[F]+(w+1)),D.push(F===0?"linear":$(C,F-1))}Fe(v,N)}const _=U+p;we(A,l,D,v,U,_),m=Math.max(k+p,m),G=Math.max(_,G)};if(Z(O)){const h=Q(O,c);b(g,f,X("default",h))}else{const h=q(O,g,r,y),S=h.length;for(let A=0;A<S;A++){g=g,f=f;const j=h[A],I=Q(j,c);for(const l in g)b(g[l],Ke(f,l),X(l,I),A,S)}}x=u,u+=m}return c.forEach((T,d)=>{for(const O in T){const g=T[O];g.sort(Ge);const f=[],m=[],b=[];for(let S=0;S<g.length;S++){const{at:A,value:j,easing:I}=g[S];f.push(j),m.push(he(0,G,A)),b.push(I||"easeOut")}m[0]!==0&&(m.unshift(0),f.unshift(f[0]),b.unshift(Ne)),m[m.length-1]!==1&&(m.push(1),f.push(null)),s.has(d)||s.set(d,{keyframes:{},transition:{}});const h=s.get(d);h.keyframes[O]=f,h.transition[O]={...t,duration:G,ease:b,times:m,...n}}}),s}function Q(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function X(e,t){return t[e]||(t[e]=[]),t[e]}function Ce(e){return Array.isArray(e)?e:[e]}function Ke(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const Pe=e=>typeof e=="number",Le=e=>e.every(Pe);function Re(e,t){return e in t}class Be extends Se{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(Re(n,t)){const r=t[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return ve()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function ke(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Ee(e)?new xe(t):new Ae(t);n.mount(e),K.set(e,n)}function ze(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Be(t);n.mount(e),K.set(e,n)}function He(e,t){return Z(e)||typeof e=="number"||typeof e=="string"&&!B(t)}function ee(e,t,n,r){const a=[];if(He(e,t))a.push(De(e,B(t)&&t.default||t,n&&(n.default||n)));else{const o=q(e,t,r),s=o.length;for(let c=0;c<s;c++){const y=o[c],i=y instanceof Element?ke:ze;K.has(y)||i(y);const x=K.get(y),u={...n};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(c,s)),a.push(...Ve(x,{...t,transition:u},{}))}}return a}function Ue(e,t,n){const r=[];return Ye(e,t,n,{spring:Oe}).forEach(({keyframes:o,transition:s},c)=>{r.push(...ee(c,o,s))}),r}function We(e){return Array.isArray(e)&&e.some(Array.isArray)}function _e(e){function t(n,r,a){let o=[];return We(n)?o=Ue(n,r,e):o=ee(n,r,a,e),new Te(o)}return t}const Je=_e();function tt(){const[e,t]=V.useState(0),[n,r]=V.useState(0),[a,o]=V.useState(0),[s,c]=V.useState(0),y=()=>{const i=new Date;t(i.getFullYear());const x=ne(re(i),i);r(x),o(x/ae(i)*100);const u=i.getTime()-se(i).getTime();c(u/86400/1e3*100)};return V.useEffect(()=>{y();const i=setInterval(y,1e3);return()=>{clearInterval(i)}},[]),E.jsxs(E.Fragment,{children:[E.jsxs("p",{className:"mt-4",children:["今天是 ",e," 年的第 ",E.jsx(R,{to:n,decimals:0})," 天"]}),E.jsxs("p",{className:"mt-4",children:["今年已过 ",E.jsx(R,{to:a,decimals:5}),"%"]}),E.jsxs("p",{className:"mt-4",children:["今天已过 ",E.jsx(R,{to:s,decimals:5}),"%"]})]})}function R({to:e,decimals:t,duration:n=1}){const r=V.useRef(null),a=V.useRef(0);return V.useEffect(()=>{if(!r.current)return;const o=Je(a.current,e,{duration:n,onUpdate:s=>{r.current.textContent=s.toFixed(t)}});return a.current=e,()=>{o.stop()}},[e,t,n]),E.jsx("span",{ref:r})}export{tt as TimelineProgress};
