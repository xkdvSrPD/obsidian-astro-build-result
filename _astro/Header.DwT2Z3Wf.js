import{j as e}from"./jsx-runtime.DVTPKKJG.js";import{a as I,b as B,m as D,h as L,p as P}from"./metaInfo.DqEW8zLa.js";import{p as g,a as E}from"./scrollInfo.CKSa77NF.js";import{i as O}from"./viewport.BwTV5l-1.js";import{f as R}from"./floor.C7O8BxQ9.js";import{u as o}from"./react.DHTGaNrl.js";import{r}from"./index.Wp2u197Z.js";import{m as k,a as V,s as T}from"./config._dbYGX4y.js";import{c as f}from"./clsx.B-dksMZM.js";import{r as Y}from"./index.CkeTH89P.js";import{A as m}from"./index.DZDwMZsD.js";import{m as c}from"./proxy.DooHrIcH.js";import{u as K,a as _}from"./hooks.BpXBJzLA.js";import"./context.oaPXw0zV.js";import{R as $,T as F,P as X,O as Z,C as q}from"./index.DiyrdqHa.js";import"./toNumber.DCaU3JdG.js";import"./SVGVisualElement.CBU4GYSh.js";const x=60;function G(){const t=o(g);return t>=x*2?1:t<=x?0:R((t-x)/x,2)}function z(){return o(L)}function J(){return o(g)<x}function C(){return o(O)}function N(){const t=z(),s=o(g);return t&&s>=x}function Q(){const t=o(I),s=o(B),n=o(D);return{title:t,description:s,slug:n}}function U(){return o(P)}function W(){const t=o(g),s=o(E);return z()&&t>=400&&s==="up"}function ee(){const t=G();return e.jsx("div",{className:"absolute inset-0 -z-1 border-b border-primary bg-white/70 dark:bg-zinc-800/70 backdrop-saturate-150 backdrop-blur-lg transform-gpu",style:{opacity:t}})}function te({to:t=document.body,children:s}){return Y.createPortal(s,t)}function se(){return e.jsxs(e.Fragment,{children:[e.jsx(ne,{}),e.jsx(ae,{})]})}function ne(){const t=J(),s=N();return e.jsx(m,{children:!s&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(A,{isBgShow:t})})})}function ae(){const t=W();return e.jsx(te,{children:e.jsx(m,{children:t&&e.jsx(c.div,{className:"fixed z-10 top-12 inset-x-0 flex justify-center pointer-events-none",initial:{y:-20},animate:{y:0},exit:{y:-20,opacity:0},children:e.jsx(A,{isBgShow:!0})})})})}function A({isBgShow:t}){const s=U(),[n,i]=r.useState(0),[l,h]=r.useState(0),[p,y]=r.useState(0),v=`radial-gradient(${p}px circle at ${n}px ${l}px, rgb(var(--color-accent) / 0.12) 0%, transparent 65%)`,d=({clientX:a,clientY:b,currentTarget:w})=>{const u=w.getBoundingClientRect();i(a-u.left),h(b-u.top),y(Math.sqrt(u.width**2+u.height**2)/2.5)};return e.jsxs("nav",{className:f("relative rounded-full group pointer-events-auto duration-200",{"bg-gradient-to-b from-zinc-50/70 to-white/90 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur-md dark:from-zinc-900/70 dark:to-zinc-800/90 dark:ring-zinc-100/10":t}),onMouseMove:d,children:[e.jsx("div",{className:"absolute -z-1 -inset-px rounded-full opacity-0 group-hover:opacity-100 duration-500",style:{background:v},"aria-hidden":!0}),e.jsx("div",{className:"text-sm px-4 flex",children:k.map(a=>e.jsx(re,{href:a.link,title:a.name,icon:a.icon,isActive:s===a.link},a.name))})]})}function re({href:t,isActive:s,title:n,icon:i}){return e.jsxs("a",{className:f("relative block px-4 py-1.5",s?"text-accent":"hover:text-accent"),href:t,children:[e.jsxs("div",{className:"flex space-x-2",children:[s&&e.jsx(c.i,{className:f("iconfont",i),initial:{y:10,opacity:0},animate:{y:0,opacity:1}}),e.jsx("span",{children:n})]}),s&&e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-px bg-gradient-to-r from-transparent via-accent/70 to-transparent"})]})}function ie(t,s){const[n,i]=r.useState(t);return r.useEffect(()=>{const l=setTimeout(()=>{i(t)},s);return()=>{clearTimeout(l)}},[t,s]),n}let j=null;async function oe(){j||(j=await import("/pagefind/pagefind.js"))}function le(){const{present:t}=K(),s=()=>{t({content:e.jsx(ce,{})})};return de({onOpen:s}),e.jsx("button",{className:"size-9 rounded-full shadow-lg shadow-zinc-800/5 border border-primary bg-white/50 dark:bg-zinc-800/50 backdrop-blur",type:"button","aria-label":"Search",onClick:s,children:e.jsx("i",{className:"iconfont icon-search"})})}function ce(){const[t,s]=r.useState(""),[n,i]=r.useState(!1),[l,h]=r.useState([]),p=ie(t,350),{dismiss:y}=_();async function v(a){if(!a){h([]);return}if(i(!0),await oe(),j){const b=await j.search(a),w=await Promise.all(b.results.map(u=>u.data()));h(w)}i(!1)}r.useEffect(()=>{v(p)},[p]);let d=null;return n?d=e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",viewBox:"0 0 24 24",className:"animate-spin",children:e.jsx("path",{fill:"currentColor",d:"M12 2a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1m0 15a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0v-3a1 1 0 0 1 1-1m8.66-10a1 1 0 0 1-.366 1.366l-2.598 1.5a1 1 0 1 1-1-1.732l2.598-1.5A1 1 0 0 1 20.66 7M7.67 14.5a1 1 0 0 1-.367 1.366l-2.598 1.5a1 1 0 1 1-1-1.732l2.598-1.5a1 1 0 0 1 1.366.366M20.66 17a1 1 0 0 1-1.366.366l-2.598-1.5a1 1 0 0 1 1-1.732l2.598 1.5A1 1 0 0 1 20.66 17M7.67 9.5a1 1 0 0 1-1.367.366l-2.598-1.5a1 1 0 1 1 1-1.732l2.598 1.5A1 1 0 0 1 7.67 9.5"})})}):t.length===0?d=e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"m18.031 16.617l4.283 4.282l-1.415 1.415l-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9s9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617m-2.006-.742A6.98 6.98 0 0 0 18 11c0-3.867-3.133-7-7-7s-7 3.133-7 7s3.133 7 7 7a6.98 6.98 0 0 0 4.875-1.975z"})})}):l.length===0?d=e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M11 11v2l-5.327 6H11v2H3v-2l5.326-6H3v-2zm10-8v2l-5.327 6H21v2h-8v-2l5.326-6H13V3z"})}),e.jsx("div",{children:"无内容"})]})}):d=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm px-3 mb-2",children:["找到以下 ",l.length," 条结果"]}),l.map(a=>e.jsxs("a",{href:a.url,className:"hover:bg-accent/10 rounded block px-3 py-2",onClick:y,children:[e.jsx("div",{className:"font-semibold",children:a.meta.title}),e.jsx("p",{className:"text-sm",dangerouslySetInnerHTML:{__html:a.excerpt}})]},a.url))]}),e.jsxs(c.div,{className:"bg-primary rounded-lg w-[90vw] h-[80vh] max-w-[680px] max-h-[480px] border border-primary flex flex-col",initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},children:[e.jsx("input",{className:"px-4 py-3 outline-none bg-transparent border-b border-primary",type:"text",placeholder:"Search...",maxLength:64,value:t,onChange:a=>s(a.target.value)}),e.jsx("div",{className:"px-4 py-3 overflow-y-auto grow",children:d}),e.jsx("div",{className:"px-3 py-2 flex justify-end",children:e.jsxs("a",{href:"https://pagefind.app/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center ",children:[e.jsx("span",{className:"mr-2 text-xs",children:"Search by"}),e.jsx("span",{className:"font-semibold",children:"pagefind"})]})})]})}function de({onOpen:t}){r.useEffect(()=>{function s(n){n.key.toLowerCase()==="k"&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),t())}return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[t])}function M(){const t=C(),s=N();return t?e.jsx(m,{children:!s&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(S,{})})}):e.jsx(S,{})}function S(){return e.jsx("a",{className:"block",href:"/",title:"Nav to home",children:e.jsx("img",{className:"size-[40px] select-none object-cover rounded-2xl",src:V.avatar,alt:"Site owner avatar"})})}function ue(){const{title:t,description:s,slug:n}=Q(),i=N();return e.jsx(m,{children:i&&e.jsxs(c.div,{className:"absolute inset-0 z-1 flex items-center justify-between md:px-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:[e.jsxs("div",{className:"grow min-w-0",children:[e.jsx("div",{className:"text-secondary text-xs truncate",children:s}),e.jsx("h2",{className:"truncate text-lg",children:t})]}),e.jsxs("div",{className:"hidden md:block min-w-0 text-right",children:[e.jsx("div",{className:"text-secondary text-xs truncate",children:n}),e.jsx("div",{children:T.title})]})]})})}const xe={hidden:{x:"-100%",transition:{duration:.2,ease:"easeOut"}},visible:{x:0,transition:{staggerChildren:.1,delayChildren:.1,duration:.2,ease:"easeOut"}}},me={hidden:{opacity:0,x:"-100%"},visible:{opacity:1,x:0}};function he({zIndex:t=999}){const[s,n]=r.useState(!1),i=t-1,l=t;return e.jsxs($,{open:s,onOpenChange:n,children:[e.jsx(F,{asChild:!0,children:e.jsx(pe,{})}),e.jsx(m,{children:s&&e.jsxs(X,{forceMount:!0,children:[e.jsx(Z,{asChild:!0,children:e.jsx(c.div,{className:"fixed inset-0 bg-gray-800/40",style:{zIndex:i},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:.1}}})}),e.jsx(q,{asChild:!0,children:e.jsx(c.div,{className:"fixed left-0 inset-y-0 h-full bg-primary rounded-r-lg p-4 flex flex-col justify-center w-[260px] max-w-[80%]",style:{zIndex:l},variants:xe,initial:"hidden",animate:"visible",exit:"hidden",children:e.jsx(H.Provider,{value:{dismiss(){n(!1)}},children:e.jsx(fe,{})})})})]})})]})}const pe=r.forwardRef((t,s)=>e.jsx("button",{ref:s,className:"size-9 rounded-full shadow-lg shadow-zinc-800/5 border border-primary bg-white/50 dark:bg-zinc-800/50 backdrop-blur",type:"button","aria-label":"Open menu",...t,children:e.jsx("i",{className:"iconfont icon-menu"})}));function fe(){const{dismiss:t}=r.useContext(H);return e.jsx("ul",{className:"mt-8 pb-8 overflow-y-auto overflow-x-hidden min-h-0",children:k.map(s=>e.jsx(c.li,{variants:me,children:e.jsxs("a",{className:"inline-flex p-2 space-x-4",href:s.link,onClick:t,children:[e.jsx("i",{className:f("iconfont",s.icon)}),e.jsx("span",{children:s.name})]})},s.name))})}const H=r.createContext(null);function Le(){const t=C();return e.jsxs("header",{className:"fixed top-0 inset-x-0 h-[64px] z-10 overflow-hidden",children:[e.jsx(ee,{}),e.jsxs("div",{className:"max-w-[1100px] h-full md:px-4 mx-auto grid grid-cols-[64px_auto_64px]",children:[e.jsx("div",{className:"flex items-center justify-center",children:t?e.jsx(he,{}):e.jsx(M,{})}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[t?e.jsx(M,{}):e.jsx(se,{}),e.jsx(ue,{})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(le,{})})]})]})}export{Le as Header};
